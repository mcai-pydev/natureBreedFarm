Task Brief: Implement Parent Compatibility & Genetic Safety Check
ğŸ“Œ Goal
Prevent inbreeding by introducing logic that checks parent compatibility before allowing a breeding pair to be submitted. This is a critical feature for genetic health and aligns with long-term smart breeding strategy.

ğŸ§  Task Overview
âœ… 1. Add Compatibility Check Function
Create /lib/breeding/validatePairing.ts

Function should receive two rabbit objects and return:

ts
Copy
Edit
{
  compatible: boolean;
  reason?: string;
}
Example:

ts
Copy
Edit
const result = checkParentCompatibility(male, female);
if (!result.compatible) {
  return res.status(400).json({ error: result.reason });
}
âœ… 2. Define Matching Rules (MVP)
âŒ Deny if male.id === female.id

âŒ Deny if either parentMaleId or parentFemaleId overlaps

âŒ Deny if parentMaleId === other.parentMaleId (siblings)

âœ… Pass if no close relationship is found

ğŸ”’ Extend later to support family tree lineage scanning

âœ… 3. Wire into API Route
File: routes/breeding.ts

Inject validation before saving event to DB:

ts
Copy
Edit
const { compatible, reason } = validatePairing(male, female);
if (!compatible) return res.status(400).json({ error: reason });
âœ… 4. Update Breeding Form UI
Component: components/breeding/BreedingForm.tsx

When a pair is selected:

Run validation before allowing modal submission

Show inline error message if pair is disqualified

ğŸ§  Bonus: Add red warning icon if pair is not allowed

âœ… 5. Optional â€” Health Risk Level Tag
Add a visual tag in suggestions:

ts
Copy
Edit
<span className="text-sm px-2 py-1 rounded bg-yellow-100 text-yellow-700">
  Potential Risk
</span>
ğŸ§ª Acceptance Criteria
âœ… Invalid pairings are blocked with informative message

âœ… Valid pairings are saved and show in timeline

âœ… UI displays warning if pair fails validation

âœ… Smart Boot shows pass/fail status for validation logic

â­ Next After This Task
ğŸ§¬ Add Genetic Lineage Tracker (Phase 2)

ğŸ¤ Add AI Assistant for Pairing (Phase 3)

ğŸ“¡ Send breeding errors to centralized log system